#include <stdlib.h>
#include <string.h>

#include <lory/lory.h>
#include "benchmark.h"

static uint32_t *bitmap8888;

void setup8888(void)
{
    static uint32_t block[256] = {
        0xFF0F0FFF, 0xFF0F1FEF, 0xFF0F2FDF, 0xFF0F3FCF, 0xFF0F4FBF, 0xFF0F5FAF, 0xFF0F6F9F, 0xFF0F7F8F, 0xFF0F8F7F, 0xFF0F9F6F, 0xFF0FAF5F, 0xFF0FBF4F, 0xFF0FCF3F, 0xFF0FDF2F, 0xFF0FEF1F, 0xFF0FFF0F,
        0xFF0F1FEF, 0xFF0F2FDF, 0xFF0F3FCF, 0xFF0F4FBF, 0xFF0F5FAF, 0xFF0F6F9F, 0xFF0F7F8F, 0xFF0F8F7F, 0xFF0F9F6F, 0xFF0FAF5F, 0xFF0FBF4F, 0xFF0FCF3F, 0xFF0FDF2F, 0xFF0FEF1F, 0xFF0FFF0F, 0xFF1FEF0F,
        0xFF0F2FDF, 0xFF0F3FCF, 0xFF0F4FBF, 0xFF0F5FAF, 0xFF0F6F9F, 0xFF0F7F8F, 0xFF0F8F7F, 0xFF0F9F6F, 0xFF0FAF5F, 0xFF0FBF4F, 0xFF0FCF3F, 0xFF0FDF2F, 0xFF0FEF1F, 0xFF0FFF0F, 0xFF1FEF0F, 0xFF2FDF0F,
        0xFF0F3FCF, 0xFF0F4FBF, 0xFF0F5FAF, 0xFF0F6F9F, 0xFF0F7F8F, 0xFF0F8F7F, 0xFF0F9F6F, 0xFF0FAF5F, 0xFF0FBF4F, 0xFF0FCF3F, 0xFF0FDF2F, 0xFF0FEF1F, 0xFF0FFF0F, 0xFF1FEF0F, 0xFF2FDF0F, 0xFF3FCF0F,
        0xFF0F4FBF, 0xFF0F5FAF, 0xFF0F6F9F, 0xFF0F7F8F, 0xFF0F8F7F, 0xFF0F9F6F, 0xFF0FAF5F, 0xFF0FBF4F, 0xFF0FCF3F, 0xFF0FDF2F, 0xFF0FEF1F, 0xFF0FFF0F, 0xFF1FEF0F, 0xFF2FDF0F, 0xFF3FCF0F, 0xFF4FBF0F,
        0xFF0F5FAF, 0xFF0F6F9F, 0xFF0F7F8F, 0xFF0F8F7F, 0xFF0F9F6F, 0xFF0FAF5F, 0xFF0FBF4F, 0xFF0FCF3F, 0xFF0FDF2F, 0xFF0FEF1F, 0xFF0FFF0F, 0xFF1FEF0F, 0xFF2FDF0F, 0xFF3FCF0F, 0xFF4FBF0F, 0xFF5FAF0F,
        0xFF0F6F9F, 0xFF0F7F8F, 0xFF0F8F7F, 0xFF0F9F6F, 0xFF0FAF5F, 0xFF0FBF4F, 0xFF0FCF3F, 0xFF0FDF2F, 0xFF0FEF1F, 0xFF0FFF0F, 0xFF1FEF0F, 0xFF2FDF0F, 0xFF3FCF0F, 0xFF4FBF0F, 0xFF5FAF0F, 0xFF6F9F0F,
        0xFF0F7F8F, 0xFF0F8F7F, 0xFF0F9F6F, 0xFF0FAF5F, 0xFF0FBF4F, 0xFF0FCF3F, 0xFF0FDF2F, 0xFF0FEF1F, 0xFF0FFF0F, 0xFF1FEF0F, 0xFF2FDF0F, 0xFF3FCF0F, 0xFF4FBF0F, 0xFF5FAF0F, 0xFF6F9F0F, 0xFF7F8F0F,
        0xFF0F8F7F, 0xFF0F9F6F, 0xFF0FAF5F, 0xFF0FBF4F, 0xFF0FCF3F, 0xFF0FDF2F, 0xFF0FEF1F, 0xFF0FFF0F, 0xFF1FEF0F, 0xFF2FDF0F, 0xFF3FCF0F, 0xFF4FBF0F, 0xFF5FAF0F, 0xFF6F9F0F, 0xFF7F8F0F, 0xFF8F7F0F,
        0xFF0F9F6F, 0xFF0FAF5F, 0xFF0FBF4F, 0xFF0FCF3F, 0xFF0FDF2F, 0xFF0FEF1F, 0xFF0FFF0F, 0xFF1FEF0F, 0xFF2FDF0F, 0xFF3FCF0F, 0xFF4FBF0F, 0xFF5FAF0F, 0xFF6F9F0F, 0xFF7F8F0F, 0xFF8F7F0F, 0xFF9F6F0F,
        0xFF0FAF5F, 0xFF0FBF4F, 0xFF0FCF3F, 0xFF0FDF2F, 0xFF0FEF1F, 0xFF0FFF0F, 0xFF1FEF0F, 0xFF2FDF0F, 0xFF3FCF0F, 0xFF4FBF0F, 0xFF5FAF0F, 0xFF6F9F0F, 0xFF7F8F0F, 0xFF8F7F0F, 0xFF9F6F0F, 0xFFAF5F0F,
        0xFF0FBF4F, 0xFF0FCF3F, 0xFF0FDF2F, 0xFF0FEF1F, 0xFF0FFF0F, 0xFF1FEF0F, 0xFF2FDF0F, 0xFF3FCF0F, 0xFF4FBF0F, 0xFF5FAF0F, 0xFF6F9F0F, 0xFF7F8F0F, 0xFF8F7F0F, 0xFF9F6F0F, 0xFFAF5F0F, 0xFFBF4F0F,
        0xFF0FCF3F, 0xFF0FDF2F, 0xFF0FEF1F, 0xFF0FFF0F, 0xFF1FEF0F, 0xFF2FDF0F, 0xFF3FCF0F, 0xFF4FBF0F, 0xFF5FAF0F, 0xFF6F9F0F, 0xFF7F8F0F, 0xFF8F7F0F, 0xFF9F6F0F, 0xFFAF5F0F, 0xFFBF4F0F, 0xFFCF3F0F,
        0xFF0FDF2F, 0xFF0FEF1F, 0xFF0FFF0F, 0xFF1FEF0F, 0xFF2FDF0F, 0xFF3FCF0F, 0xFF4FBF0F, 0xFF5FAF0F, 0xFF6F9F0F, 0xFF7F8F0F, 0xFF8F7F0F, 0xFF9F6F0F, 0xFFAF5F0F, 0xFFBF4F0F, 0xFFCF3F0F, 0xFFDF2F0F,
        0xFF0FEF1F, 0xFF0FFF0F, 0xFF1FEF0F, 0xFF2FDF0F, 0xFF3FCF0F, 0xFF4FBF0F, 0xFF5FAF0F, 0xFF6F9F0F, 0xFF7F8F0F, 0xFF8F7F0F, 0xFF9F6F0F, 0xFFAF5F0F, 0xFFBF4F0F, 0xFFCF3F0F, 0xFFDF2F0F, 0xFFEF1F0F,
        0xFF0FFF0F, 0xFF1FEF0F, 0xFF2FDF0F, 0xFF3FCF0F, 0xFF4FBF0F, 0xFF5FAF0F, 0xFF6F9F0F, 0xFF7F8F0F, 0xFF8F7F0F, 0xFF9F6F0F, 0xFFAF5F0F, 0xFFBF4F0F, 0xFFCF3F0F, 0xFFDF2F0F, 0xFFEF1F0F, 0xFFFF0F0F,
    };

    size_t blocksize = sizeof(uint32_t)*256;
    int len8888 = blocksize*32*48;
    uint32_t *p = bitmap8888 = (uint32_t *)malloc(sizeof(uint32_t)*len8888);
    for (int i=0; i < len8888; i+=blocksize)
    {
        memcpy(p, block, blocksize);
        p += blocksize;
    }
}

void teardown8888(void)
{
    free(bitmap8888);
}

void android8888(void)
{
    LoryConvertAndroid8888(bitmap8888, 768, 512, 768*sizeof(uint32_t), 0.0, 40.0);
}

int main(void)
{
    benchmark("Android RGBA_8888", 1000, android8888, setup8888, teardown8888);
    return 0;
}
